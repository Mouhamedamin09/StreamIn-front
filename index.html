<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Discover the latest movies and trailers on StreamIn - your ultimate source for movies and tv series."
    />
    <meta
      name="keywords"
      content="latest movies, movie trailers, watch movies online, TV series, streaming movies, free movies, new movie releases, popular TV shows"
    />

    <title>StreamIn</title>
    <!-- Video Player Ad Blocker - Targets Only Streaming Servers -->
    <script>
      (function () {
        // Only block ads from video players, not the whole app
        function blockVideoPlayerAds() {
          try {
            // Find video player iframes (StreamIn players)
            const videoPlayers = document.querySelectorAll(
              'iframe[title*="StreamIn player"]'
            );

            videoPlayers.forEach((player) => {
              // Add protection attributes to prevent ads
              if (!player.dataset.adBlocked) {
                player.setAttribute(
                  "sandbox",
                  "allow-scripts allow-same-origin allow-forms allow-presentation"
                );
                player.setAttribute("referrerpolicy", "no-referrer");
                player.dataset.adBlocked = "true";

                // Block right-click ads in video players
                player.addEventListener("contextmenu", function (e) {
                  e.preventDefault();
                });
              }
            });

            // Block popup ads that might come from video players
            const originalOpen = window.open;
            window.open = function (url) {
              if (
                url &&
                (url.includes("ad") ||
                  url.includes("popup") ||
                  url.includes("doubleclick"))
              ) {
                return null;
              }
              return originalOpen.apply(this, arguments);
            };

            // Block ad messages from video players only
            window.addEventListener("message", function (e) {
              if (e.data && typeof e.data === "string") {
                if (
                  e.data.includes("ad") ||
                  e.data.includes("popup") ||
                  e.data.includes("redirect")
                ) {
                  e.stopPropagation();
                  return false;
                }
              }
            });
          } catch (error) {
            // Silent error handling - don't break the app
          }
        }

        // Run when page loads
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", blockVideoPlayerAds);
        } else {
          blockVideoPlayerAds();
        }

        // Monitor for new video players
        setInterval(blockVideoPlayerAds, 3000);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script defer type="module" src="/src/main.tsx"></script>
  </body>
</html>
